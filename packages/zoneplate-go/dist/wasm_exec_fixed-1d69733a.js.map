{"version":3,"file":"wasm_exec_fixed-1d69733a.js","sources":["../lib/wasm-go/wasm_exec_fixed.js"],"sourcesContent":["// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n\n(() => {\n  // Map multiple JavaScript environments to a single common API,\n  // preferring web standards over Node.js API.\n  //\n  // Environments considered:\n  // - Browsers\n  // - Node.js\n  // - Electron\n  // - Parcel\n\n  if (typeof global !== 'undefined') {\n    // global already exists\n  } else if (typeof window !== 'undefined') {\n    window.global = window\n  } else if (typeof self !== 'undefined') {\n    self.global = self\n  } else {\n    throw new Error('cannot export Go (neither global, window nor self is defined)')\n  }\n\n  // This is the culprit!\n  // if (!global.require && typeof require !== 'undefined') {\n  //   global.require = require\n  // }\n\n  // if (!global.fs && global.require) {\n  //   const fs = require('fs')\n  //   if (Object.keys(fs) !== 0) {\n  //     global.fs = fs\n  //   }\n  // }\n\n  const enosys = () => {\n    const err = new Error('not implemented')\n    err.code = 'ENOSYS'\n    return err\n  }\n\n  if (!global.fs) {\n    let outputBuf = ''\n    global.fs = {\n      constants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 }, // unused\n      writeSync (fd, buf) {\n        outputBuf += decoder.decode(buf)\n        const nl = outputBuf.lastIndexOf('\\n')\n        if (nl != -1) {\n          console.log(outputBuf.substr(0, nl))\n          outputBuf = outputBuf.substr(nl + 1)\n        }\n        return buf.length\n      },\n      write (fd, buf, offset, length, position, callback) {\n        if (offset !== 0 || length !== buf.length || position !== null) {\n          callback(enosys())\n          return\n        }\n        const n = this.writeSync(fd, buf)\n        callback(null, n)\n      },\n      chmod (path, mode, callback) { callback(enosys()) },\n      chown (path, uid, gid, callback) { callback(enosys()) },\n      close (fd, callback) { callback(enosys()) },\n      fchmod (fd, mode, callback) { callback(enosys()) },\n      fchown (fd, uid, gid, callback) { callback(enosys()) },\n      fstat (fd, callback) { callback(enosys()) },\n      fsync (fd, callback) { callback(null) },\n      ftruncate (fd, length, callback) { callback(enosys()) },\n      lchown (path, uid, gid, callback) { callback(enosys()) },\n      link (path, link, callback) { callback(enosys()) },\n      lstat (path, callback) { callback(enosys()) },\n      mkdir (path, perm, callback) { callback(enosys()) },\n      open (path, flags, mode, callback) { callback(enosys()) },\n      read (fd, buffer, offset, length, position, callback) { callback(enosys()) },\n      readdir (path, callback) { callback(enosys()) },\n      readlink (path, callback) { callback(enosys()) },\n      rename (from, to, callback) { callback(enosys()) },\n      rmdir (path, callback) { callback(enosys()) },\n      stat (path, callback) { callback(enosys()) },\n      symlink (path, link, callback) { callback(enosys()) },\n      truncate (path, length, callback) { callback(enosys()) },\n      unlink (path, callback) { callback(enosys()) },\n      utimes (path, atime, mtime, callback) { callback(enosys()) }\n    }\n  }\n\n  if (!global.process) {\n    global.process = {\n      getuid () { return -1 },\n      getgid () { return -1 },\n      geteuid () { return -1 },\n      getegid () { return -1 },\n      getgroups () { throw enosys() },\n      pid: -1,\n      ppid: -1,\n      umask () { throw enosys() },\n      cwd () { throw enosys() },\n      chdir () { throw enosys() }\n    }\n  }\n\n  if (!global.crypto) {\n    const nodeCrypto = require('crypto')\n    global.crypto = {\n      getRandomValues (b) {\n        nodeCrypto.randomFillSync(b)\n      }\n    }\n  }\n\n  if (!global.performance) {\n    global.performance = {\n      now () {\n        const [sec, nsec] = process.hrtime()\n        return sec * 1000 + nsec / 1000000\n      }\n    }\n  }\n\n  if (!global.TextEncoder) {\n    global.TextEncoder = require('util').TextEncoder\n  }\n\n  if (!global.TextDecoder) {\n    global.TextDecoder = require('util').TextDecoder\n  }\n\n  // End of polyfills for common API.\n\n  const encoder = new TextEncoder('utf-8')\n  const decoder = new TextDecoder('utf-8')\n\n  global.Go = class {\n    constructor () {\n      this.argv = ['js']\n      this.env = {}\n      this.exit = (code) => {\n        if (code !== 0) {\n          console.warn('exit code:', code)\n        }\n      }\n      this._exitPromise = new Promise((resolve) => {\n        this._resolveExitPromise = resolve\n      })\n      this._pendingEvent = null\n      this._scheduledTimeouts = new Map()\n      this._nextCallbackTimeoutID = 1\n\n      const setInt64 = (addr, v) => {\n        this.mem.setUint32(addr + 0, v, true)\n        this.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true)\n      }\n\n      const getInt64 = (addr) => {\n        const low = this.mem.getUint32(addr + 0, true)\n        const high = this.mem.getInt32(addr + 4, true)\n        return low + high * 4294967296\n      }\n\n      const loadValue = (addr) => {\n        const f = this.mem.getFloat64(addr, true)\n        if (f === 0) {\n          return undefined\n        }\n        if (!isNaN(f)) {\n          return f\n        }\n\n        const id = this.mem.getUint32(addr, true)\n        return this._values[id]\n      }\n\n      const storeValue = (addr, v) => {\n        const nanHead = 0x7FF80000\n\n        if (typeof v === 'number' && v !== 0) {\n          if (isNaN(v)) {\n            this.mem.setUint32(addr + 4, nanHead, true)\n            this.mem.setUint32(addr, 0, true)\n            return\n          }\n          this.mem.setFloat64(addr, v, true)\n          return\n        }\n\n        if (v === undefined) {\n          this.mem.setFloat64(addr, 0, true)\n          return\n        }\n\n        let id = this._ids.get(v)\n        if (id === undefined) {\n          id = this._idPool.pop()\n          if (id === undefined) {\n            id = this._values.length\n          }\n          this._values[id] = v\n          this._goRefCounts[id] = 0\n          this._ids.set(v, id)\n        }\n        this._goRefCounts[id]++\n        let typeFlag = 0\n        switch (typeof v) {\n          case 'object':\n            if (v !== null) {\n              typeFlag = 1\n            }\n            break\n          case 'string':\n            typeFlag = 2\n            break\n          case 'symbol':\n            typeFlag = 3\n            break\n          case 'function':\n            typeFlag = 4\n            break\n        }\n        this.mem.setUint32(addr + 4, nanHead | typeFlag, true)\n        this.mem.setUint32(addr, id, true)\n      }\n\n      const loadSlice = (addr) => {\n        const array = getInt64(addr + 0)\n        const len = getInt64(addr + 8)\n        return new Uint8Array(this._inst.exports.mem.buffer, array, len)\n      }\n\n      const loadSliceOfValues = (addr) => {\n        const array = getInt64(addr + 0)\n        const len = getInt64(addr + 8)\n        const a = new Array(len)\n        for (let i = 0; i < len; i++) {\n          a[i] = loadValue(array + i * 8)\n        }\n        return a\n      }\n\n      const loadString = (addr) => {\n        const saddr = getInt64(addr + 0)\n        const len = getInt64(addr + 8)\n        return decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len))\n      }\n\n      const timeOrigin = Date.now() - performance.now()\n      this.importObject = {\n        go: {\n          // Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\n          // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\n          // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\n          // This changes the SP, thus we have to update the SP used by the imported function.\n\n          // func wasmExit(code int32)\n          'runtime.wasmExit': (sp) => {\n            const code = this.mem.getInt32(sp + 8, true)\n            this.exited = true\n            delete this._inst\n            delete this._values\n            delete this._goRefCounts\n            delete this._ids\n            delete this._idPool\n            this.exit(code)\n          },\n\n          // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\n          'runtime.wasmWrite': (sp) => {\n            const fd = getInt64(sp + 8)\n            const p = getInt64(sp + 16)\n            const n = this.mem.getInt32(sp + 24, true)\n            fs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n))\n          },\n\n          // func resetMemoryDataView()\n          'runtime.resetMemoryDataView': (sp) => {\n            this.mem = new DataView(this._inst.exports.mem.buffer)\n          },\n\n          // func nanotime1() int64\n          'runtime.nanotime1': (sp) => {\n            setInt64(sp + 8, (timeOrigin + performance.now()) * 1000000)\n          },\n\n          // func walltime1() (sec int64, nsec int32)\n          'runtime.walltime1': (sp) => {\n            const msec = (new Date()).getTime()\n            setInt64(sp + 8, msec / 1000)\n            this.mem.setInt32(sp + 16, (msec % 1000) * 1000000, true)\n          },\n\n          // func scheduleTimeoutEvent(delay int64) int32\n          'runtime.scheduleTimeoutEvent': (sp) => {\n            const id = this._nextCallbackTimeoutID\n            this._nextCallbackTimeoutID++\n            this._scheduledTimeouts.set(id, setTimeout(\n              () => {\n                this._resume()\n                while (this._scheduledTimeouts.has(id)) {\n                  // for some reason Go failed to register the timeout event, log and try again\n                  // (temporary workaround for https://github.com/golang/go/issues/28975)\n                  console.warn('scheduleTimeoutEvent: missed timeout event')\n                  this._resume()\n                }\n              },\n              getInt64(sp + 8) + 1 // setTimeout has been seen to fire up to 1 millisecond early\n            ))\n            this.mem.setInt32(sp + 16, id, true)\n          },\n\n          // func clearTimeoutEvent(id int32)\n          'runtime.clearTimeoutEvent': (sp) => {\n            const id = this.mem.getInt32(sp + 8, true)\n            clearTimeout(this._scheduledTimeouts.get(id))\n            this._scheduledTimeouts.delete(id)\n          },\n\n          // func getRandomData(r []byte)\n          'runtime.getRandomData': (sp) => {\n            crypto.getRandomValues(loadSlice(sp + 8))\n          },\n\n          // func finalizeRef(v ref)\n          'syscall/js.finalizeRef': (sp) => {\n            const id = this.mem.getUint32(sp + 8, true)\n            this._goRefCounts[id]--\n            if (this._goRefCounts[id] === 0) {\n              const v = this._values[id]\n              this._values[id] = null\n              this._ids.delete(v)\n              this._idPool.push(id)\n            }\n          },\n\n          // func stringVal(value string) ref\n          'syscall/js.stringVal': (sp) => {\n            storeValue(sp + 24, loadString(sp + 8))\n          },\n\n          // func valueGet(v ref, p string) ref\n          'syscall/js.valueGet': (sp) => {\n            const result = Reflect.get(loadValue(sp + 8), loadString(sp + 16))\n            sp = this._inst.exports.getsp() // see comment above\n            storeValue(sp + 32, result)\n          },\n\n          // func valueSet(v ref, p string, x ref)\n          'syscall/js.valueSet': (sp) => {\n            Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32))\n          },\n\n          // func valueDelete(v ref, p string)\n          'syscall/js.valueDelete': (sp) => {\n            Reflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16))\n          },\n\n          // func valueIndex(v ref, i int) ref\n          'syscall/js.valueIndex': (sp) => {\n            storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)))\n          },\n\n          // valueSetIndex(v ref, i int, x ref)\n          'syscall/js.valueSetIndex': (sp) => {\n            Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24))\n          },\n\n          // func valueCall(v ref, m string, args []ref) (ref, bool)\n          'syscall/js.valueCall': (sp) => {\n            try {\n              const v = loadValue(sp + 8)\n              const m = Reflect.get(v, loadString(sp + 16))\n              const args = loadSliceOfValues(sp + 32)\n              const result = Reflect.apply(m, v, args)\n              sp = this._inst.exports.getsp() // see comment above\n              storeValue(sp + 56, result)\n              this.mem.setUint8(sp + 64, 1)\n            } catch (err) {\n              storeValue(sp + 56, err)\n              this.mem.setUint8(sp + 64, 0)\n            }\n          },\n\n          // func valueInvoke(v ref, args []ref) (ref, bool)\n          'syscall/js.valueInvoke': (sp) => {\n            try {\n              const v = loadValue(sp + 8)\n              const args = loadSliceOfValues(sp + 16)\n              const result = Reflect.apply(v, undefined, args)\n              sp = this._inst.exports.getsp() // see comment above\n              storeValue(sp + 40, result)\n              this.mem.setUint8(sp + 48, 1)\n            } catch (err) {\n              storeValue(sp + 40, err)\n              this.mem.setUint8(sp + 48, 0)\n            }\n          },\n\n          // func valueNew(v ref, args []ref) (ref, bool)\n          'syscall/js.valueNew': (sp) => {\n            try {\n              const v = loadValue(sp + 8)\n              const args = loadSliceOfValues(sp + 16)\n              const result = Reflect.construct(v, args)\n              sp = this._inst.exports.getsp() // see comment above\n              storeValue(sp + 40, result)\n              this.mem.setUint8(sp + 48, 1)\n            } catch (err) {\n              storeValue(sp + 40, err)\n              this.mem.setUint8(sp + 48, 0)\n            }\n          },\n\n          // func valueLength(v ref) int\n          'syscall/js.valueLength': (sp) => {\n            setInt64(sp + 16, parseInt(loadValue(sp + 8).length))\n          },\n\n          // valuePrepareString(v ref) (ref, int)\n          'syscall/js.valuePrepareString': (sp) => {\n            const str = encoder.encode(String(loadValue(sp + 8)))\n            storeValue(sp + 16, str)\n            setInt64(sp + 24, str.length)\n          },\n\n          // valueLoadString(v ref, b []byte)\n          'syscall/js.valueLoadString': (sp) => {\n            const str = loadValue(sp + 8)\n            loadSlice(sp + 16).set(str)\n          },\n\n          // func valueInstanceOf(v ref, t ref) bool\n          'syscall/js.valueInstanceOf': (sp) => {\n            this.mem.setUint8(sp + 24, (loadValue(sp + 8) instanceof loadValue(sp + 16)) ? 1 : 0)\n          },\n\n          // func copyBytesToGo(dst []byte, src ref) (int, bool)\n          'syscall/js.copyBytesToGo': (sp) => {\n            const dst = loadSlice(sp + 8)\n            const src = loadValue(sp + 32)\n            if (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {\n              this.mem.setUint8(sp + 48, 0)\n              return\n            }\n            const toCopy = src.subarray(0, dst.length)\n            dst.set(toCopy)\n            setInt64(sp + 40, toCopy.length)\n            this.mem.setUint8(sp + 48, 1)\n          },\n\n          // func copyBytesToJS(dst ref, src []byte) (int, bool)\n          'syscall/js.copyBytesToJS': (sp) => {\n            const dst = loadValue(sp + 8)\n            const src = loadSlice(sp + 16)\n            if (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {\n              this.mem.setUint8(sp + 48, 0)\n              return\n            }\n            const toCopy = src.subarray(0, dst.length)\n            dst.set(toCopy)\n            setInt64(sp + 40, toCopy.length)\n            this.mem.setUint8(sp + 48, 1)\n          },\n\n          debug: (value) => {\n            console.log(value)\n          }\n        }\n      }\n    }\n\n    async run (instance) {\n      this._inst = instance\n      this.mem = new DataView(this._inst.exports.mem.buffer)\n      this._values = [ // JS values that Go currently has references to, indexed by reference id\n        NaN,\n        0,\n        null,\n        true,\n        false,\n        global,\n        this\n      ]\n      this._goRefCounts = new Array(this._values.length).fill(Infinity) // number of references that Go has to a JS value, indexed by reference id\n      this._ids = new Map([ // mapping from JS values to reference ids\n        [0, 1],\n        [null, 2],\n        [true, 3],\n        [false, 4],\n        [global, 5],\n        [this, 6]\n      ])\n      this._idPool = [] // unused ids that have been garbage collected\n      this.exited = false // whether the Go program has exited\n\n      // Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.\n      let offset = 4096\n\n      const strPtr = (str) => {\n        const ptr = offset\n        const bytes = encoder.encode(str + '\\0')\n        new Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes)\n        offset += bytes.length\n        if (offset % 8 !== 0) {\n          offset += 8 - (offset % 8)\n        }\n        return ptr\n      }\n\n      const argc = this.argv.length\n\n      const argvPtrs = []\n      this.argv.forEach((arg) => {\n        argvPtrs.push(strPtr(arg))\n      })\n      argvPtrs.push(0)\n\n      const keys = Object.keys(this.env).sort()\n      keys.forEach((key) => {\n        argvPtrs.push(strPtr(`${key}=${this.env[key]}`))\n      })\n      argvPtrs.push(0)\n\n      const argv = offset\n      argvPtrs.forEach((ptr) => {\n        this.mem.setUint32(offset, ptr, true)\n        this.mem.setUint32(offset + 4, 0, true)\n        offset += 8\n      })\n\n      this._inst.exports.run(argc, argv)\n      if (this.exited) {\n        this._resolveExitPromise()\n      }\n      await this._exitPromise\n    }\n\n    _resume () {\n      if (this.exited) {\n        throw new Error('Go program has already exited')\n      }\n      this._inst.exports.resume()\n      if (this.exited) {\n        this._resolveExitPromise()\n      }\n    }\n\n    _makeFuncWrapper (id) {\n      const go = this\n      return function () {\n        const event = { id: id, this: this, args: arguments }\n        go._pendingEvent = event\n        go._resume()\n        return event.result\n      }\n    }\n  }\n\n  if (\n    global.require &&\n\t\tglobal.require.main === module &&\n\t\tglobal.process &&\n\t\tglobal.process.versions &&\n\t\t!global.process.versions.electron\n  ) {\n    if (process.argv.length < 3) {\n      console.error('usage: go_js_wasm_exec [wasm binary] [arguments]')\n      process.exit(1)\n    }\n\n    const go = new Go()\n    go.argv = process.argv.slice(2)\n    go.env = Object.assign({ TMPDIR: require('os').tmpdir() }, process.env)\n    go.exit = process.exit\n    WebAssembly.instantiate(fs.readFileSync(process.argv[2]), go.importObject).then((result) => {\n      process.on('exit', (code) => { // Node.js exits if no event handler is pending\n        if (code === 0 && !go.exited) {\n          // deadlock, make Go print error and stack traces\n          go._pendingEvent = { id: 0 }\n          go._resume()\n        }\n      })\n      return go.run(result.instance)\n    }).catch((err) => {\n      console.error(err)\n      process.exit(1)\n    })\n  }\n})()\n"],"names":["global","window","self","Error","enosys","err","code","fs","outputBuf","constants","O_WRONLY","O_RDWR","O_CREAT","O_TRUNC","O_APPEND","O_EXCL","writeSync","fd","buf","decoder","decode","nl","lastIndexOf","console","log","substr","length","write","offset","position","callback","this","chmod","path","mode","chown","uid","gid","close","fchmod","fchown","fstat","fsync","ftruncate","lchown","link","lstat","mkdir","perm","open","flags","read","buffer","readdir","readlink","rename","from","to","rmdir","stat","symlink","truncate","unlink","utimes","atime","mtime","process","getuid","getgid","geteuid","getegid","getgroups","pid","ppid","umask","cwd","chdir","crypto","nodeCrypto","require","getRandomValues","b","randomFillSync","performance","now","sec","nsec","hrtime","TextEncoder","TextDecoder","encoder","Go","constructor","argv","env","exit","warn","_exitPromise","Promise","resolve","_resolveExitPromise","_pendingEvent","_scheduledTimeouts","Map","_nextCallbackTimeoutID","setInt64","addr","v","mem","setUint32","Math","floor","getInt64","getUint32","getInt32","loadValue","f","getFloat64","isNaN","id","_values","storeValue","setFloat64","undefined","_ids","get","_idPool","pop","_goRefCounts","set","typeFlag","loadSlice","array","len","Uint8Array","_inst","exports","loadSliceOfValues","a","Array","i","loadString","saddr","DataView","timeOrigin","Date","importObject","go","runtime.wasmExit","sp","exited","runtime.wasmWrite","p","n","runtime.resetMemoryDataView","runtime.nanotime1","runtime.walltime1","msec","getTime","setInt32","runtime.scheduleTimeoutEvent","setTimeout","_resume","has","runtime.clearTimeoutEvent","clearTimeout","delete","runtime.getRandomData","syscall/js.finalizeRef","push","syscall/js.stringVal","syscall/js.valueGet","result","Reflect","getsp","syscall/js.valueSet","syscall/js.valueDelete","deleteProperty","syscall/js.valueIndex","syscall/js.valueSetIndex","syscall/js.valueCall","m","args","apply","setUint8","syscall/js.valueInvoke","syscall/js.valueNew","construct","syscall/js.valueLength","parseInt","syscall/js.valuePrepareString","str","encode","String","syscall/js.valueLoadString","syscall/js.valueInstanceOf","syscall/js.copyBytesToGo","dst","src","Uint8ClampedArray","toCopy","subarray","syscall/js.copyBytesToJS","debug","value","[object Object]","instance","NaN","fill","Infinity","strPtr","ptr","bytes","argc","argvPtrs","forEach","arg","Object","keys","sort","key","run","resume","_makeFuncWrapper","event","arguments","main","module","versions","electron","error","slice","assign","TMPDIR","tmpdir","WebAssembly","instantiate","readFileSync","then","on","catch"],"mappings":"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"}